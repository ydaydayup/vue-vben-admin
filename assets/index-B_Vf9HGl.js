var Q=Object.defineProperty;var _=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(o,n,t)=>n in o?Q(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,N=(o,n)=>{for(var t in n||(n={}))E.call(n,t)&&j(o,t,n[t]);if(_)for(var t of _(n))L.call(n,t)&&j(o,t,n[t]);return o};var A=(o,n)=>{var t={};for(var r in o)E.call(o,r)&&n.indexOf(r)<0&&(t[r]=o[r]);if(o!=null&&_)for(var r of _(o))n.indexOf(r)<0&&L.call(o,r)&&(t[r]=o[r]);return t};var k=(o,n,t)=>new Promise((r,g)=>{var d=a=>{try{c(t.next(a))}catch(i){g(i)}},F=a=>{try{c(t.throw(a))}catch(i){g(i)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(d,F);c((t=t.apply(o,n)).next())});import T from"./FormRender-WI5OncLC.js";import{a2 as G,br as B,f as D,e as O,U as H,V as X,o as Y}from"./antd-veAxK-b_.js";import{g as Z,I,d as x,f as oo,c as w,p as q,u as eo,a8 as R,_ as V,$ as z,k as U,aa as y,F as to,ak as no,aj as so,O as ro,ae as ao,a9 as io,ab as mo,ad as lo}from"./vue-lybwVHEG.js";import{b as fo,f as W}from"./index-ZfBvCGVI.js";import{b0 as co,c as uo}from"./entry/index-ik9kLCN0-1706159834690.js";import"./index-Wj-D_lje.js";import"./formItemConfig-m0xdxqrq.js";import"./componentMap-Nm0uM88W.js";import"./useFormItem-Y8aCfwEt.js";import"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-r0ly_Fh6.js";import"./index-cpAkOqO9.js";import"./useWindowSizeFn-YZ4hdm43.js";import"./uuid-uJQj7518.js";import"./useSortable-WekxPyT_.js";import"./download-qgvMrq71.js";import"./base64Conver-UKE1Rgbp.js";import"./index-pHlIjQ5b.js";import"./IconPicker.vue_vue_type_script_setup_true_lang-92LOaLSc.js";import"./copyTextToClipboard-2AOVSRlO.js";import"./index-6ksZpJ-P.js";import"./index-wml-s6Fc.js";import"./useFormDesignState-yMpjuC-D.js";function po(o,n,t,r){(()=>{const u=Z(),C=u==null?void 0:u.parent;C&&o.formConfig.schemas.forEach(m=>{B(m.componentProps,(M,e)=>{O(M)&&(m.componentProps[e]=M.bind(C))}),B(m.on,(M,e)=>{O(M)&&(m.componentProps[e]=M.bind(C))})})})();const{emit:d}=t,F=G.useForm,{resetFields:c,validate:a,clearValidate:i,validateField:h}=F(n,[]);return{validate:a,validateField:h,resetFields:c,clearValidate:i,submit:()=>k(this,null,function*(){var C,m;const u=D(I(n.value));return d==null||d("submit",u),(m=(C=o.formConfig).submit)==null||m.call(C,u),u})}}function go(o,n,t,r){const g=e=>fo(o.formConfig.schemas,s=>s.field===e),d=(e,s,l)=>{const f=g(e);f&&(f[s]=l)},F=(e,s,l)=>{const f=g(e);f!=null&&f.componentProps&&(["options","treeData"].includes(s)&&c(e,void 0),f.componentProps[s]=l)},c=(e,s)=>{var l;typeof e=="string"?(o.formModel[e]=s,(l=t.value)==null||l.validateField(e,s,[])):Object.keys(e).forEach(p=>{var b;o.formModel[p]=e[p],(b=t.value)==null||b.validateField(p,e[p],[])})},a=(e,s)=>{o.formConfig[e]=s},i=e=>D(o.formModel)[e],h=()=>k(this,null,function*(){return D(o.formModel)}),v=e=>{d(e,"hidden",!0)},u=e=>{typeof e=="string"?F(e,"disabled",!0):a("disabled",e!==!1)},C=e=>{d(e,"hidden",!1)},m={};return(e=>{W(e,s=>{W(e,l=>{var f;m[l.field]||(m[l.field]=new Set),(f=s.link)!=null&&f.includes(l.field)&&O(s.update)&&m[l.field].add(s)}),m[s.field].add(s)})})(o.formConfig.schemas),N({linkOn:m,setValue:c,getValue:i,hidden:v,show:C,set:d,get:g,setProps:F,getData:h,disable:u},r)}const Fo=x({name:"VFormCreate",components:{FormRender:T,Form:G,Row:H},props:{fApi:{type:Object},formModel:{type:Object,default:()=>({})},formConfig:{type:Object,required:!0}},emits:["submit","change","update:fApi","update:formModel"],setup(o,n){const t=o.formConfig.layout=="vertical"?X:H,{emit:r}=n,g=oo(null),d=w({get:()=>o.formModel,set:p=>r("update:formModel",p)}),F=w(()=>o.formConfig.schemas&&o.formConfig.schemas.filter(p=>p.hidden!==!0)),c=co(o,"fApi",r),{submit:a,validate:i,clearValidate:h,resetFields:v,validateField:u}=po(o,d,n),f=go({formConfig:o.formConfig,formData:o.formModel},n,g,{submit:a,validate:i,validateField:u,resetFields:v,clearValidate:h}),{linkOn:C}=f,m=A(f,["linkOn"]);c.value=m;const M=p=>{var S;const{schema:b,value:J}=p,{field:K}=eo(b);(S=C[K])==null||S.forEach(P=>{var $;($=P.update)==null||$.call(P,J,P,c.value)})},e=w(()=>Y(o.formConfig,["disabled","labelWidth","schemas"])),s=()=>{a()};q("formModel",d);const l=(p,b)=>{d.value[p]=b};return q("setFormModelMethod",l),{eFormModel:g,submit:a,validate:i,validateField:u,resetFields:v,clearValidate:h,handleChange:M,formModelProps:e,handleSubmit:s,setFormModel:l,formModelNew:d,wrapperComp:t,noHiddenList:F}}}),Co={class:"v-form-container"};function ho(o,n,t,r,g,d){const F=R("FormRender"),c=R("Row"),a=R("Form");return V(),z("div",Co,[U(a,lo({class:"v-form-model",ref:"eFormModel",model:o.formModel},o.formModelProps),{default:y(()=>[U(c,null,{default:y(()=>[(V(!0),z(to,null,mo(o.noHiddenList,(i,h)=>(V(),io(F,{key:h,schema:i,formConfig:o.formConfig,formData:o.formModelNew,onChange:o.handleChange,setFormModel:o.setFormModel,onSubmit:o.handleSubmit,onReset:o.resetFields},ao({_:2},[i&&i.componentProps?{name:"schema.componentProps!.slotName",fn:y(()=>[ro(o.$slots,i.componentProps.slotName,so(no({formModel:o.formModel,field:i.field,schema:i})),void 0,!0)]),key:"0"}:void 0]),1032,["schema","formConfig","formData","onChange","setFormModel","onSubmit","onReset"]))),128))]),_:3})]),_:3},16,["model"])])}const Uo=uo(Fo,[["render",ho],["__scopeId","data-v-06441f85"]]);export{Uo as default};
